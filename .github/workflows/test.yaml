name: Tests

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  tests:

    name: Test
    runs-on: ubuntu-latest
    timeout-minutes: 15

    defaults:
      run:
        shell: bash

    steps:
    - uses: actions/checkout@v2

    - uses: actions/setup-node@v3
      with:
        cache: 'npm'
        node-version-file: '.nvmrc'

    - run: npm ci

    - run: npx jest
      env:
        CI: true
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
